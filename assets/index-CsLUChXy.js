import{i as xt,g as ut,a as ht,j as e,R as b,r as m,s as mt,o as pt,c as A,q as G,b as bt,l as ft,d as W,w as K,e as g,f as ie,h as _,k as R,m as gt,n as jt}from"./vendor-C3-_SqFu.js";(function(){const j=document.createElement("link").relList;if(j&&j.supports&&j.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))I(f);new MutationObserver(f=>{for(const v of f)if(v.type==="childList")for(const J of v.addedNodes)J.tagName==="LINK"&&J.rel==="modulepreload"&&I(J)}).observe(document,{childList:!0,subtree:!0});function k(f){const v={};return f.integrity&&(v.integrity=f.integrity),f.referrerPolicy&&(v.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?v.credentials="include":f.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function I(f){if(f.ep)return;f.ep=!0;const v=k(f);fetch(f.href,v)}})();const wt={apiKey:"AIzaSyBPnpPjwWNBRRPeV23v6sfVTWsFTpd-wOY",authDomain:"zafar-6276f.firebaseapp.com",projectId:"zafar-6276f",storageBucket:"zafar-6276f.firebasestorage.app",messagingSenderId:"169302104808",appId:"1:169302104808:web:072800fb53afd542be875d",measurementId:"G-M7WMQE4DCQ"},De=xt(wt),u=ut(De),vt=ht(De);async function yt(N){const k=new TextEncoder().encode(N.trim()),I=await crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(I)).map(v=>v.toString(16).padStart(2,"0")).join("")}const c=({name:N,className:j="w-5 h-5"})=>{const k={shield:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),search:e.jsxs(b.Fragment,{children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.3-4.3"})]}),user:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),lock:e.jsxs(b.Fragment,{children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),plus:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M12 5v14"}),e.jsx("path",{d:"M5 12h14"})]}),fingerprint:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M2 12a10 10 0 0 1 18-6"}),e.jsx("path",{d:"M5 15a10 10 0 0 1 12-10"}),e.jsx("path",{d:"M8 18a10 10 0 0 1 6-12"}),e.jsx("path",{d:"M11 21a10 10 0 0 1 0-14"})]}),eye:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),eyeOff:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),e.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),e.jsx("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7c.44 0 .87-.03 1.28-.09"}),e.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]}),trash:e.jsx("path",{d:"M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),edit:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),list:e.jsxs(b.Fragment,{children:[e.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),e.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),e.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),e.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),upload:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),camera:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),e.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),social:e.jsx(b.Fragment,{children:e.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),check:e.jsx("polyline",{points:"20 6 9 17 4 12"}),x:e.jsxs(b.Fragment,{children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),alert:e.jsxs(b.Fragment,{children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),imagePlus:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"}),e.jsx("line",{x1:"16",y1:"5",x2:"22",y2:"5"}),e.jsx("line",{x1:"19",y1:"2",x2:"19",y2:"8"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),activity:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"}),globe:e.jsxs(b.Fragment,{children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),smartphone:e.jsxs(b.Fragment,{children:[e.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),e.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]}),info:e.jsxs(b.Fragment,{children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),pin:e.jsx("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4a2 2 0 0 0-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7A1.5 1.5 0 1 1 7 5.5 1.5 1.5 0 0 1 5.5 7z"}),grip:e.jsxs(b.Fragment,{children:[e.jsx("circle",{cx:"9",cy:"12",r:"1"}),e.jsx("circle",{cx:"9",cy:"5",r:"1"}),e.jsx("circle",{cx:"9",cy:"19",r:"1"}),e.jsx("circle",{cx:"15",cy:"12",r:"1"}),e.jsx("circle",{cx:"15",cy:"5",r:"1"}),e.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),text:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M17 6.1H3"}),e.jsx("path",{d:"M21 12.1H3"}),e.jsx("path",{d:"M15.1 18H3"})]}),telegram:e.jsxs(b.Fragment,{children:[e.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),e.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),instagram:e.jsxs(b.Fragment,{children:[e.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),e.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),e.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]}),eitaa:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),bale:e.jsxs(b.Fragment,{children:[e.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}),e.jsx("path",{d:"m9 11 3 3L22 4"})]}),soroush:e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"})};return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:j,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:k[N]||e.jsx("circle",{cx:"12",cy:"12",r:"10"})})},p="zafar-secure-node",M="SECURE_CONTENT_BLUR_HASH",_e="https://kos-sher-2025-12.deno.dev",Nt=({toasts:N})=>e.jsx("div",{className:"fixed top-5 left-1/2 -translate-x-1/2 z-[100] flex flex-col gap-2 w-full max-w-sm px-4",children:N.map(j=>e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-2xl shadow-2xl backdrop-blur-md border animate-in slide-in-from-top-5 duration-300 ${j.type==="error"?"bg-red-500/20 border-red-500/50 text-red-100":"bg-green-500/20 border-green-500/50 text-green-100"}`,children:[e.jsx("div",{className:`p-2 rounded-full ${j.type==="error"?"bg-red-500/20":"bg-green-500/20"}`,children:e.jsx(c,{name:j.type==="error"?"alert":"check",className:"w-5 h-5"})}),e.jsx("p",{className:"text-sm font-bold",children:j.msg})]},j.id))}),St=({isOpen:N,title:j,message:k,onConfirm:I,onCancel:f,isDanger:v})=>N?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[110] p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"glass w-full max-w-md p-8 rounded-[2.5rem] border border-white/10 shadow-2xl scale-100 animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:`w-16 h-16 rounded-3xl flex items-center justify-center mx-auto mb-6 ${v?"bg-red-500/10 text-red-500":"bg-purple-500/10 text-purple-500"}`,children:e.jsx(c,{name:v?"alert":"lock",className:"w-8 h-8"})}),e.jsx("h3",{className:"text-2xl font-black text-white text-center mb-3",children:j}),e.jsx("p",{className:"text-slate-400 text-center text-sm mb-8 leading-relaxed",children:k}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:I,className:`flex-1 py-4 rounded-2xl font-bold text-sm transition-all ${v?"bg-red-600 hover:bg-red-500 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:"تایید نهایی"}),e.jsx("button",{onClick:f,className:"flex-1 py-4 rounded-2xl font-bold text-sm bg-white/5 hover:bg-white/10 text-slate-400 transition-all",children:"انصراف"})]})]})}):null;function Pt(){var Ce;const[N,j]=m.useState("public"),[k,I]=m.useState([]),[f,v]=m.useState(""),[J,D]=m.useState(!0),[E,ce]=m.useState(null),[y,X]=m.useState(null),[Ie,U]=m.useState(!1),[z,H]=m.useState(null),[Me,me]=m.useState([]),[T,pe]=m.useState({isOpen:!1,title:"",message:"",action:null,isDanger:!1}),[oe,L]=m.useState([]),[Q,V]=m.useState([]),[Oe,Y]=m.useState([]),[O,C]=m.useState([]),[$e,ee]=m.useState(!1),[de,te]=m.useState([]),[Fe,be]=m.useState([]),[xe,fe]=m.useState({}),[Ae,ge]=m.useState(!1),[Ee,ue]=m.useState(!1),[se,ze]=m.useState([]),q=m.useRef(),je=m.useRef(),ae=m.useRef(),we=m.useRef(),le={firstName:{label:"نام",defaultPublic:!0},lastName:{label:"نام خانوادگی",defaultPublic:!0},fatherName:{label:"نام پدر",defaultPublic:!1,fakeLen:6},birthDate:{label:"تاریخ تولد",defaultPublic:!1,fakeLen:10,isNum:!0},role:{label:"تخصص / سمت",defaultPublic:!0},phone:{label:"شماره تماس",defaultPublic:!1,fakeLen:11,isNum:!0},nationalId:{label:"کد ملی",defaultPublic:!1,fakeLen:10,isNum:!0},address:{label:"آدرس سکونت",defaultPublic:!1,fakeLen:30},telegram:{label:"تلگرام",defaultPublic:!0,isSocial:!0},instagram:{label:"اینستاگرام",defaultPublic:!0,isSocial:!0},eitaa:{label:"ایتا",defaultPublic:!0,isSocial:!0},bale:{label:"بله",defaultPublic:!0,isSocial:!0},soroush:{label:"سروش",defaultPublic:!0,isSocial:!0},order:{label:"اولویت نمایش (عدد)",defaultPublic:!0,type:"number"},extraInfo:{label:"پیام ویژه",defaultPublic:!1,type:"textarea"},personalPhoto:{label:"عکس پروفایل",defaultPublic:!0,type:"image"}},re=Object.entries(le).reduce((t,[s,a])=>(t[s]={val:"",isPublic:a.defaultPublic,label:a.label,type:a.type},t),{}),[$,Z]=m.useState(re),S=(t,s="success")=>{const a=Date.now();me(l=>[...l,{id:a,msg:t,type:s}]),setTimeout(()=>me(l=>l.filter(r=>r.id!==a)),4e3)},ve=(t,s,a,l=!1)=>{pe({isOpen:!0,title:t,message:s,action:a,isDanger:l})},he=()=>{pe({...T,isOpen:!1})},Le=(t,s,a)=>{q.current={sectionIdx:s,itemIdx:a},t.target.style.opacity="0.4"},Re=(t,s,a)=>{if(je.current={sectionIdx:s,itemIdx:a},q.current.sectionIdx===s){const l=[...O],r=l[s].items[q.current.itemIdx];l[s].items.splice(q.current.itemIdx,1),l[s].items.splice(a,0,r),q.current.itemIdx=a,C(l)}},Ue=t=>{t.target.style.opacity="1",q.current=null,je.current=null},He=(t,s)=>{ae.current=s,t.target.closest(".section-card").style.opacity="0.4"},Te=(t,s)=>{we.current=s;const a=ae.current;if(a===void 0||a===s)return;const l=[...O],r=l[a];l.splice(a,1),l.splice(s,0,r),ae.current=s,C(l)},Ve=t=>{t.target.closest(".section-card").style.opacity="1",ae.current=null,we.current=null};m.useEffect(()=>{const t=n=>n.indexOf("Win")!==-1?"Windows":n.indexOf("Mac")!==-1?"MacOS":n.indexOf("X11")!==-1?"UNIX":n.indexOf("Linux")!==-1?"Linux":n.indexOf("Android")!==-1?"Android":n.indexOf("like Mac")!==-1?"iOS":"Unknown OS",s=n=>n.includes("Firefox")?"Firefox":n.includes("SamsungBrowser")?"Samsung Internet":n.includes("Opera")||n.includes("OPR")?"Opera":n.includes("Trident")?"IE":n.includes("Edge")?"Edge":n.includes("Chrome")?"Chrome":n.includes("Safari")?"Safari":"Unknown",a=()=>new Promise(n=>{if(!navigator.geolocation){n(null);return}navigator.geolocation.getCurrentPosition(o=>n(`${o.coords.latitude},${o.coords.longitude}`),o=>n("Denied/Unavailable"),{timeout:5e3})}),l=async()=>{if(!sessionStorage.getItem("logged_visit"))try{const o=await(await fetch("https://ipapi.co/json/")).json(),x=navigator.userAgent;let i="Desktop";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(x)&&(i="Mobile");const d=Intl.DateTimeFormat().resolvedOptions().timeZone,h=`${window.screen.width}x${window.screen.height}`,w=navigator.language,P=document.referrer||"مستقیم",F=await a();await gt(A(u,"artifacts",p,"public","data","analytics_logs"),{ip:o.ip||"Unknown",city:o.city||"Unknown",country:o.country_name||"Unknown",os:t(x),browser:s(x),device:i,screen:h,timezone:d,lang:w,referrer:P,userAgent:x,geo:F,timestamp:Date.now(),page:window.location.pathname}),sessionStorage.setItem("logged_visit","true")}catch{console.error("Tracking blocked.")}};(async()=>{try{await mt(vt),Be(),setTimeout(l,1e3)}catch{}})()},[]);const qe=async()=>{D(!0);try{const t=G(A(u,"artifacts",p,"public","data","analytics_logs"),bt("timestamp","desc"),ft(100)),a=(await W(t)).docs.map(l=>({id:l.id,...l.data()}));ze(a),ge(!0)}catch(t){S("خطا در دریافت آمار: "+t.message,"error")}finally{D(!1)}};m.useEffect(()=>{let t;return(async()=>{try{const a=await fetch(`${_e}/api/profiles`);if(!a.ok)throw new Error("API Failed");const r=(await a.json()).sort((n,o)=>{if(n.isPinned&&!o.isPinned)return-1;if(!n.isPinned&&o.isPinned)return 1;const x=parseInt(n.order)||9999,i=parseInt(o.order)||9999;return x-i});I(r),D(!1)}catch(a){console.warn("API fetch failed, falling back to direct connection",a),t=pt(A(u,"artifacts",p,"public","data","profiles_public"),l=>{const n=l.docs.map(o=>({id:o.id,...o.data()})).sort((o,x)=>{if(o.isPinned&&!x.isPinned)return-1;if(!o.isPinned&&x.isPinned)return 1;const i=parseInt(o.order)||9999,d=parseInt(x.order)||9999;return i-d});I(n),D(!1)})}})(),()=>{t&&t()}},[]);const ye=(t=10,s=!1)=>{if(s)return Math.floor(Math.random()*1e10).toString().slice(0,t);const a="ابپتثجچحخدذرزژسشصضطظعغفقکگلمنوهی ";let l="";for(let r=0;r<t;r++)l+=a[Math.floor(Math.random()*a.length)];return l},Be=async()=>{const t=localStorage.getItem("zafar_secure_hash");if(t)try{const s=g(u,"secret_vault",t),a=await ie(s);a.exists()?ce(a.data()):localStorage.removeItem("zafar_secure_hash")}catch{}},Ge=t=>new Promise(s=>{const a=new FileReader;a.readAsDataURL(t),a.onload=l=>{const r=new Image;r.src=l.target.result,r.onload=()=>{const n=document.createElement("canvas"),o=800,x=o/r.width;n.width=o,n.height=r.height*x,n.getContext("2d").drawImage(r,0,0,n.width,n.height),s(n.toDataURL("image/jpeg",.7))}}}),We=async t=>{const s=Array.from(t.target.files);if(s.length+oe.length+Q.length>30){S("حداکثر ۳۰ عکس مجاز است.","error");return}const a=[];for(const l of s){if(l.size>2*1024*1024){S(`فایل ${l.name} خیلی حجیم است.`,"error");continue}const r=await Ge(l);a.push({data:r,isPublic:!0,caption:""})}L(l=>[...l,...a])},Ne=(t,s)=>{if(s){const a=Q[t];Y(l=>[...l,a.id]),V(l=>l.filter((r,n)=>n!==t))}else L(a=>a.filter((l,r)=>r!==t))},Se=(t,s)=>{s?V(a=>a.map((l,r)=>r===t?{...l,isPublic:!l.isPublic}:l)):L(a=>a.map((l,r)=>r===t?{...l,isPublic:!l.isPublic}:l))},Pe=(t,s,a)=>{s?V(l=>l.map((r,n)=>n===t?{...r,caption:a}:r)):L(l=>l.map((r,n)=>n===t?{...r,caption:a}:r))},Je=async t=>{const s=t.target.files[0];if(!s)return;D(!0);const a=new FileReader;a.onload=async l=>{try{const r=l.target.result.trim(),n=await yt(r),o=g(u,"secret_vault",n),x=await ie(o);x.exists()?(ce(x.data()),localStorage.setItem("zafar_secure_hash",n),j("admin"),S("هویت تایید شد. خوش آمدید.")):S("کلید نامعتبر است!","error")}catch{S("خطا در پردازش کلید","error")}finally{D(!1)}},a.readAsText(s)},Xe=()=>{ve("خروج از سیستم","آیا از خروج اطمینان دارید؟ کلید دسترسی از مرورگر پاک خواهد شد.",()=>{localStorage.removeItem("zafar_secure_hash"),ce(null),j("public"),window.location.reload()},!0)},ne=(t,s)=>{Z(a=>({...a,[t]:{...a[t],val:s}}))},Ze=t=>{const s=t.target.files[0];if(s){if(s.size>500*1024){S("حجم عکس پروفایل باید کمتر از ۵۰۰ کیلوبایت باشد.","error");return}const a=new FileReader;a.onloadend=()=>{ne("personalPhoto",a.result)},a.readAsDataURL(s)}},Ke=t=>{Z(s=>({...s,[t]:{...s[t],isPublic:!s[t].isPublic}}))},Qe=async(t,s)=>{t.stopPropagation();try{const a=!s.isPinned;await _(g(u,"artifacts",p,"public","data","profiles_public",s.id),{isPinned:a},{merge:!0}),S(a?"کاربر پین شد.":"پین برداشته شد.")}catch{S("خطا در تغییر وضعیت پین","error")}},Ye=()=>{C(t=>[...t,{id:Date.now(),title:"",items:[]}])},et=t=>{C(s=>s.filter((a,l)=>l!==t))},ke=(t,s,a)=>{const l=[...O];l[t][s]=a,C(l)},tt=t=>{const s=[...O];s[t].items.push({key:"",value:"",isPublic:!0,type:"kv"}),C(s)},st=(t,s)=>{const a=[...O];a[t].items.splice(s,1),C(a)},B=(t,s,a,l)=>{const r=[...O];r[t].items[s][a]=l,C(r)},at=async t=>{X(t);let s=[];try{const a=await fetch(`${_e}/api/gallery?id=${t.id}`);if(a.ok)s=await a.json();else throw new Error("API Error")}catch{try{const l=G(A(u,"artifacts",p,"public","data","gallery_store"),K("ownerId","==",t.id));s=(await W(l)).docs.map(n=>({...n.data(),isPublic:!0}))}catch{}}if(E)try{const a=g(u,"artifacts",p,"public","data","profiles_secure",t.id),l=await ie(a);let r={},n=t.customSections?JSON.parse(JSON.stringify(t.customSections)):[];l.exists()&&(r=l.data(),r.customSections&&r.customSections.forEach(h=>{const w=n.findIndex(P=>P.title===h.title);w>=0?n[w].items=[...n[w].items,...h.items]:n.push(h)}));const o=G(A(u,"artifacts",p,"public","data","gallery_secure"),K("ownerId","==",t.id)),i=(await W(o)).docs.map(h=>({...h.data(),isPublic:!1}));s=[...s.filter(h=>h.data!==M),...i],X(h=>({...h,...r,gallery:s,customSections:n}))}catch(a){console.error(a)}else X(a=>({...a,gallery:s}))},lt=()=>{H(null),Z(re),C([]),L([]),V([]),Y([]),U(!0)},rt=async(t,s)=>{t.stopPropagation(),H(s.id),D(!0);let a=JSON.parse(JSON.stringify(re)),l=[];try{Object.keys(a).forEach(d=>{s[d]&&(a[d].val=s[d],a[d].isPublic=!0)}),s.customSections&&(l=[...s.customSections]);try{const d=g(u,"artifacts",p,"public","data","profiles_secure",s.id),h=await ie(d);if(h.exists()){const w=h.data();Object.keys(a).forEach(P=>{w[P]&&(a[P].val=w[P],a[P].isPublic=!1)}),w.customSections&&w.customSections.forEach(P=>{const F=l.findIndex(dt=>dt.title===P.title);F>=0?l[F].items=[...l[F].items,...P.items]:l.push(P)})}}catch(d){console.warn("Secure profile load failed:",d)}const r=G(A(u,"artifacts",p,"public","data","gallery_store"),K("ownerId","==",s.id)),o=(await W(r)).docs.map(d=>({id:d.id,data:d.data().data,isPublic:d.data().data!==M,caption:d.data().caption||""}));let x=[];try{const d=G(A(u,"artifacts",p,"public","data","gallery_secure"),K("ownerId","==",s.id));x=(await W(d)).docs.map(w=>({id:w.id,data:w.data().data,isPublic:!1,caption:w.data().caption||""}))}catch(d){console.warn("Secure gallery load failed:",d)}const i=o.filter(d=>d.data!==M);V([...i,...x]),L([]),Y([]),Z(a),C(l),U(!0)}catch(r){console.error("Edit loading error:",r),S("خطا در بارگذاری اطلاعات: "+r.message,"error"),H(null),U(!1)}finally{D(!1)}},nt=async(t,s)=>{t.stopPropagation(),ve("حذف پرونده","آیا از حذف کامل این شخص و تمام تصاویر مربوطه اطمینان دارید؟ این عملیات غیرقابل بازگشت است.",async()=>{try{await R(g(u,"artifacts",p,"public","data","profiles_public",s));try{await R(g(u,"artifacts",p,"public","data","profiles_secure",s))}catch{}const a=["gallery_store","gallery_secure"];for(const l of a){const r=G(A(u,"artifacts",p,"public","data",l),K("ownerId","==",s));(await W(r)).forEach(async o=>{await R(g(u,"artifacts",p,"public","data",l,o.id))})}S("پرونده با موفقیت امحا شد."),he()}catch(a){S("خطا در حذف: "+a.code,"error"),he()}},!0)},it=async t=>{t.preventDefault();const s=z||`resume_${Date.now()}`,a={},l={};Object.entries($).forEach(([x,i])=>{i.val&&(i.isPublic?a[x]=i.val:l[x]=i.val)});const r=[],n=[];O.forEach(x=>{const i=x.items.map(h=>({key:h.key,value:h.isPublic?h.value:M,isPublic:h.isPublic,type:h.type||"kv"})),d=x.items.filter(h=>!h.isPublic);i.length>0&&r.push({title:x.title,items:i}),d.length>0&&n.push({title:x.title,items:d})}),r.length>0&&(a.customSections=r),n.length>0&&(l.customSections=n);const o=`${$.firstName.val} ${$.lastName.val}`.trim()||"کاربر ناشناس";a.displayName=o,a.role=$.role.val||"عضو",$.order&&$.order.val&&(a.order=$.order.val);try{let x=!1;if(z){const i=k.find(d=>d.id===z);i&&(x=i.isPinned||!1),a.isPinned=x}if(await _(g(u,"artifacts",p,"public","data","profiles_public",s),a),Object.keys(l).length>0)await _(g(u,"artifacts",p,"public","data","profiles_secure",s),l);else if(z)try{await R(g(u,"artifacts",p,"public","data","profiles_secure",s))}catch{}for(const i of Oe){try{await R(g(u,"artifacts",p,"public","data","gallery_store",i))}catch{}try{await R(g(u,"artifacts",p,"public","data","gallery_secure",i))}catch{}}for(const i of Q)if(i.isPublic){await _(g(u,"artifacts",p,"public","data","gallery_store",i.id),{ownerId:s,data:i.data,uploadedAt:Date.now(),caption:i.caption||""});try{await R(g(u,"artifacts",p,"public","data","gallery_secure",i.id))}catch{}}else await _(g(u,"artifacts",p,"public","data","gallery_secure",i.id),{ownerId:s,data:i.data,uploadedAt:Date.now(),caption:i.caption||""}),await _(g(u,"artifacts",p,"public","data","gallery_store",i.id),{ownerId:s,data:M,uploadedAt:Date.now(),caption:i.caption||""});for(const i of oe){const d=`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;i.isPublic?await _(g(u,"artifacts",p,"public","data","gallery_store",d),{ownerId:s,data:i.data,uploadedAt:Date.now(),caption:i.caption||""}):(await _(g(u,"artifacts",p,"public","data","gallery_secure",d),{ownerId:s,data:i.data,uploadedAt:Date.now(),caption:i.caption||""}),await _(g(u,"artifacts",p,"public","data","gallery_store",d),{ownerId:s,data:M,uploadedAt:Date.now(),caption:i.caption||""}))}U(!1),Z(re),H(null),C([]),L([]),V([]),Y([]),S(z?"پرونده بروزرسانی شد.":"پرونده جدید ثبت گردید.")}catch(x){S("خطا در ثبت: "+x.message,"error")}},ct=t=>{const s=t.target.files[0];if(!s)return;const a=new FileReader;a.onload=l=>{const n=l.target.result.split(`
`).map(o=>o.trim()).filter(o=>o);if(n.length>0){const o=n[0].split(",").map(i=>i.trim()),x=n.slice(1).map(i=>{const d=i.split(","),h={};return o.forEach((w,P)=>{var F;h[w]=(F=d[P])==null?void 0:F.trim()}),h});be(o),te(x),ee(!0),fe({})}else alert("فایل CSV خالی است یا فرمت آن صحیح نیست.")},a.readAsText(s),t.target.value=""},ot=async()=>{if(de.length===0)return;if(!Object.values(xe).some(a=>a)){alert("لطفاً حداقل یک ستون را انتخاب کنید.");return}D(!0);let s=0;try{for(const a of de){const l=`resume_${Date.now()}_${Math.floor(Math.random()*1e3)}`,r={},n={};Object.entries(le).forEach(([i,d])=>{const h=xe[i],w=h?a[h]:"";w&&(d.defaultPublic?r[i]=w:n[i]=w)});const o=(r.firstName||n.firstName||"").toString(),x=(r.lastName||n.lastName||"").toString();!o&&!x||(r.displayName=`${o} ${x}`.trim()||"کاربر وارد شده",r.role=(r.role||n.role||"عضو جدید").toString(),Object.keys(r).length>0&&await _(g(u,"artifacts",p,"public","data","profiles_public",l),r),Object.keys(n).length>0&&await _(g(u,"artifacts",p,"public","data","profiles_secure",l),n),s++)}alert(`${s} رکورد با موفقیت وارد پایگاه داده شد.`),ee(!1),te([]),be([])}catch(a){console.error(a),alert("خطا در ایمپورت: "+a.message)}finally{D(!1)}};return J?e.jsx("div",{className:"h-screen flex items-center justify-center text-purple-500 font-bold bg-black flex-col gap-4",children:e.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 rounded-full animate-spin border-t-transparent"})}):e.jsxs("div",{className:"min-h-screen bg-[#050505] text-white font-['Vazirmatn']",children:[e.jsx(Nt,{toasts:Me}),e.jsx(St,{isOpen:T.isOpen,title:T.title,message:T.message,onConfirm:T.action,onCancel:he,isDanger:T.isDanger}),e.jsxs("nav",{className:"glass sticky top-0 z-40 border-b border-white/5 px-4 md:px-8 h-20 flex items-center justify-between backdrop-blur-xl bg-black/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-700 rounded-xl flex items-center justify-center shadow-[0_0_15px_rgba(147,51,234,0.3)]",children:e.jsx(c,{name:"shield",className:"text-white w-6 h-6"})}),e.jsx("span",{className:"font-black text-xl tracking-tight hidden md:block",children:"پایگاه ظفر"})]}),e.jsxs("div",{className:"flex gap-2 bg-white/5 p-1 rounded-xl items-center",children:[e.jsx("button",{onClick:()=>ue(!0),className:"p-2 rounded-lg text-slate-500 hover:text-white transition-colors",title:"درباره ما",children:e.jsx(c,{name:"info",className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>j("public"),className:`px-4 md:px-5 py-2 rounded-lg text-xs font-bold transition-all ${N==="public"?"bg-white/10 text-white shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:"لیست عمومی"}),E?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:qe,className:"px-4 md:px-5 py-2 rounded-lg text-xs font-bold transition-all bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg flex items-center gap-2",title:"آمار",children:[e.jsx(c,{name:"activity",className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden md:inline",children:"آمار"})]}),e.jsx("button",{onClick:()=>j("admin"),className:`px-4 md:px-5 py-2 rounded-lg text-xs font-bold transition-all ${N==="admin"?"bg-purple-600 text-white shadow-lg shadow-purple-900/20":"text-slate-500 hover:text-slate-300"}`,children:"پنل مدیریت"}),e.jsx("button",{onClick:Xe,className:"flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg text-xs font-bold transition-all bg-red-500/10 text-red-400 hover:bg-red-500 hover:text-white",title:"خروج",children:e.jsx(c,{name:"lock",className:"w-3 h-3"})})]}):e.jsx("button",{onClick:()=>j("login_mode"),className:`flex items-center gap-2 px-4 md:px-5 py-2 rounded-lg text-xs font-bold transition-all ${N==="login_mode"?"bg-purple-600 text-white shadow-lg shadow-purple-900/20":"text-slate-500 hover:text-slate-300"}`,children:"ورود امن"})]})]}),e.jsxs("main",{className:"max-w-5xl mx-auto p-4 md:p-6 pt-8 md:pt-12",children:[N==="public"&&e.jsxs("div",{className:"animate-in fade-in duration-700",children:[e.jsxs("div",{className:"text-center mb-10 md:mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-6xl font-black mb-4 md:mb-6 tracking-tighter bg-gradient-to-r from-white to-slate-500 bg-clip-text text-transparent",children:"اعضای مدرسه"}),e.jsx("p",{className:"text-slate-500 text-xs md:text-sm mb-6",children:"برای اطلاعات بیشتر روی هر اسم کلیک کن"}),e.jsxs("div",{className:"relative max-w-xl mx-auto group",children:[e.jsx("input",{type:"text",placeholder:"نام، تخصص یا شناسه...",className:"w-full bg-[#0a0a0a] border border-white/10 rounded-[2rem] py-4 md:py-6 pr-14 pl-6 outline-none focus:border-purple-500/30 transition-all text-center shadow-2xl",value:f,onChange:t=>v(t.target.value)}),e.jsx("div",{className:"absolute right-5 top-1/2 -translate-y-1/2 text-slate-700",children:e.jsx(c,{name:"search"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-8",children:k.filter(t=>{var s,a;return((s=t.displayName)==null?void 0:s.includes(f))||((a=t.role)==null?void 0:a.includes(f))}).map(t=>e.jsxs("div",{onClick:()=>at(t),className:`glass p-6 md:p-8 rounded-[2rem] hover:border-purple-500/30 transition-all cursor-pointer group purple-glow text-center relative overflow-hidden active:scale-95 duration-200 ${t.isPinned?"border-indigo-500/40 bg-indigo-900/10":""}`,children:[t.isPinned&&e.jsx("div",{className:"absolute top-4 right-4 bg-indigo-500 text-white p-1 rounded-full",children:e.jsx(c,{name:"pin",className:"w-3 h-3"})}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-white/5 rounded-full flex items-center justify-center mb-4 md:mb-6 mx-auto group-hover:bg-purple-500/10 transition-colors overflow-hidden border-2 border-white/5 group-hover:border-purple-500/30",children:t.personalPhoto?e.jsx("img",{src:t.personalPhoto,className:"w-full h-full object-cover"}):e.jsx(c,{name:"user",className:"text-slate-400 group-hover:text-purple-400 w-8 h-8"})}),e.jsx("h3",{className:"font-bold text-lg md:text-xl text-white mb-1 truncate",children:t.displayName}),e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest",children:t.role})]},t.id))})]}),N==="login_mode"&&e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] animate-in zoom-in duration-300 px-4",children:e.jsxs("div",{className:"glass p-8 md:p-12 rounded-[2.5rem] text-center max-w-lg w-full border-purple-500/20 shadow-[0_0_100px_rgba(147,51,234,0.1)]",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-purple-500/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(c,{name:"lock",className:"w-8 h-8 md:w-10 md:h-10 text-purple-500"})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-black mb-2 text-white",children:"احراز هویت"}),e.jsx("p",{className:"text-slate-500 text-xs md:text-sm mb-8 md:mb-10 leading-relaxed",children:"جهت دسترسی به پنل مدیریت، کلید امنیتی (Key File) را بارگذاری نمایید."}),e.jsxs("label",{className:"block w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white py-4 md:py-5 rounded-2xl cursor-pointer font-bold text-sm transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1",children:[e.jsx("span",{children:"بارگذاری کلید امنیتی"}),e.jsx("input",{type:"file",onChange:Je,className:"hidden"})]})]})}),N==="admin"&&E&&e.jsxs("div",{className:"animate-in slide-in-from-bottom-8 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{className:"text-center md:text-right",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white",children:"پنل مدیریت یکپارچه"}),e.jsxs("p",{className:"text-slate-500 text-xs mt-1 font-mono",children:["ADMIN ID: ",E.national_id]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("label",{className:"flex-1 md:flex-none justify-center bg-indigo-600 hover:bg-indigo-500 text-white px-4 md:px-6 py-3 rounded-2xl text-xs md:text-sm font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all hover:scale-105 active:scale-95 cursor-pointer",children:[e.jsx(c,{name:"upload",className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"ورود گروهی (CSV)"}),e.jsx("span",{className:"md:hidden",children:"CSV"}),e.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:ct})]}),e.jsxs("button",{onClick:lt,className:"flex-1 md:flex-none justify-center bg-purple-600 hover:bg-purple-500 text-white px-4 md:px-6 py-3 rounded-2xl text-xs md:text-sm font-bold flex items-center gap-2 shadow-lg shadow-purple-900/20 transition-all hover:scale-105 active:scale-95",children:[e.jsx(c,{name:"plus",className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"افزودن تکی"}),e.jsx("span",{className:"md:hidden",children:"جدید"})]})]})]}),e.jsx("div",{className:"glass p-4 md:p-6 rounded-[2rem] border border-green-500/20 mb-8 relative overflow-hidden bg-green-900/5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-500/10 rounded-xl",children:e.jsx(c,{name:"fingerprint",className:"text-green-500 w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] text-green-500 uppercase tracking-widest block",children:"وضعیت سیستم"}),e.jsx("span",{className:"text-sm text-white font-bold",children:"سطح دسترسی ۱ (Admin) فعال است"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[e.jsx("div",{className:"w-1 h-6 bg-purple-500 rounded-full"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"لیست اعضا"})]}),k.length===0?e.jsx("div",{className:"text-center text-slate-500 py-16 glass rounded-3xl border-dashed border-2 border-white/5",children:"هیچ پرونده‌ای یافت نشد."}):k.map(t=>e.jsxs("div",{className:`glass p-4 rounded-3xl flex flex-col md:flex-row items-center justify-between gap-4 hover:bg-white/5 transition-all group ${t.isPinned?"border-indigo-500/30":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center shrink-0 text-slate-400 group-hover:text-purple-400 transition-colors overflow-hidden",children:t.personalPhoto?e.jsx("img",{src:t.personalPhoto,className:"w-full h-full object-cover"}):e.jsx(c,{name:"user",className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[t.displayName,t.isPinned&&e.jsx(c,{name:"pin",className:"w-3 h-3 text-indigo-400"})]}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:t.role}),t.order&&e.jsxs("span",{className:"text-[9px] text-slate-600",children:["اولویت: ",t.order]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto justify-end border-t border-white/5 md:border-none pt-4 md:pt-0 mt-2 md:mt-0 relative z-20",children:[e.jsx("button",{onClick:s=>Qe(s,t),className:`p-3 rounded-2xl transition-all ${t.isPinned?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50":"bg-white/5 text-slate-400 hover:bg-indigo-500/20 hover:text-indigo-400"}`,children:e.jsx(c,{name:"pin",className:"w-4 h-4"})}),e.jsxs("button",{type:"button",onClick:s=>rt(s,t),className:"flex-1 md:flex-none justify-center px-5 py-3 bg-blue-500/10 text-blue-400 hover:bg-blue-500 hover:text-white rounded-2xl text-xs font-bold transition-all flex items-center gap-2",children:[e.jsx(c,{name:"edit",className:"w-4 h-4"})," ویرایش"]}),e.jsxs("button",{type:"button",onClick:s=>nt(s,t.id),className:"flex-1 md:flex-none justify-center px-5 py-3 bg-red-500/10 text-red-400 hover:bg-red-500 hover:text-white rounded-2xl text-xs font-bold transition-all flex items-center gap-2",children:[e.jsx(c,{name:"trash",className:"w-4 h-4"})," حذف"]})]})]},t.id))]})]})]}),Ie&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/98 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"glass w-full max-w-2xl p-6 md:p-12 rounded-[2.5rem] border border-purple-500/20 my-10 relative shadow-2xl",children:[e.jsx("button",{onClick:()=>{U(!1),H(null)},className:"absolute top-6 left-6 text-slate-500 hover:text-white transition-colors bg-white/5 p-2 rounded-full",children:e.jsx(c,{name:"trash",className:"w-5 h-5 rotate-45"})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-8 text-center tracking-tight",children:z?"ویرایش پرونده":"ثبت پرونده جدید"}),e.jsxs("form",{onSubmit:it,className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries($).map(([t,s])=>e.jsxs("div",{className:`relative group ${s.type==="textarea"||t==="personalPhoto"?"col-span-1 md:col-span-2":""}`,children:[e.jsxs("label",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mb-2 block mr-1 flex justify-between items-center px-1",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[s.label,s.label.includes("تلگرام")&&e.jsx(c,{name:"telegram",className:"w-3 h-3 text-blue-400"}),s.label.includes("اینستاگرام")&&e.jsx(c,{name:"instagram",className:"w-3 h-3 text-pink-500"}),s.label.includes("ایتا")&&e.jsx(c,{name:"eitaa",className:"w-3 h-3 text-orange-500"}),s.label.includes("بله")&&e.jsx(c,{name:"bale",className:"w-3 h-3 text-green-500"}),s.label.includes("سروش")&&e.jsx(c,{name:"soroush",className:"w-3 h-3 text-blue-500"})]}),e.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-md ${s.isPublic?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:s.isPublic?"عمومی":"محرمانه"})]}),e.jsxs("div",{className:"relative",children:[s.type==="textarea"?e.jsx("textarea",{value:s.val,onChange:a=>ne(t,a.target.value),className:`w-full p-4 pl-12 bg-black/50 rounded-2xl border ${s.isPublic?"border-white/10 focus:border-green-500/50":"border-red-500/20 focus:border-red-500/50"} text-white outline-none transition-all focus:bg-white/5 min-h-[120px]`,placeholder:"..."}):s.type==="image"?e.jsx("div",{className:`w-full p-4 bg-black/50 rounded-2xl border ${s.isPublic?"border-white/10":"border-red-500/20"} flex flex-col items-center gap-4`,children:s.val?e.jsxs("div",{className:"relative w-24 h-24 md:w-32 md:h-32 rounded-full overflow-hidden group/img border-4 border-white/10",children:[e.jsx("img",{src:s.val,alt:"Profile",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>ne(t,""),className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-opacity",children:e.jsx(c,{name:"trash",className:"w-6 h-6 text-white"})})]}):e.jsxs("label",{className:"cursor-pointer flex flex-col items-center gap-2 text-slate-500 hover:text-white transition-colors",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center border-2 border-dashed border-white/20",children:e.jsx(c,{name:"camera",className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs",children:"انتخاب عکس پروفایل"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Ze})]})}):e.jsx("input",{type:s.type||"text",value:s.val,onChange:a=>ne(t,a.target.value),className:`w-full p-4 pl-12 bg-black/50 rounded-2xl border ${s.isPublic?"border-white/10 focus:border-green-500/50":"border-red-500/20 focus:border-red-500/50"} text-white outline-none transition-all focus:bg-white/5`,placeholder:"..."}),s.type!=="image"&&e.jsx("button",{type:"button",onClick:()=>Ke(t),className:`absolute left-2 top-4 p-2 rounded-xl transition-all ${s.isPublic?"text-green-500 bg-green-500/10 hover:bg-green-500/20":"text-red-500 bg-red-500/10 hover:bg-red-500/20"}`,title:s.isPublic?"نمایش برای عموم":"فقط ادمین",children:e.jsx(c,{name:s.isPublic?"eye":"eyeOff",className:"w-5 h-5"})})]})]},t))}),e.jsxs("div",{className:"border-t border-white/5 pt-6 mt-4",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[e.jsx(c,{name:"list",className:"w-4 h-4"})," بخش‌های سفارشی"]}),e.jsx("div",{className:"space-y-4",children:O.map((t,s)=>e.jsxs("div",{className:"section-card bg-white/5 p-4 rounded-3xl border border-white/10 space-y-4 relative transition-opacity",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-slate-500 cursor-grab active:cursor-grabbing p-2 hover:bg-white/5 rounded-xl",draggable:!0,onDragStart:a=>He(a,s),onDragEnter:a=>Te(a,s),onDragEnd:Ve,children:e.jsx(c,{name:"grip",className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"عنوان بخش (مثلاً پرونده پزشکی)",className:"bg-transparent border-b border-white/20 text-white w-full py-2 text-sm focus:border-purple-500 outline-none",value:t.title,onChange:a=>ke(s,"title",a.target.value)}),e.jsx("button",{type:"button",onClick:()=>ke(s,"isPublic",!t.isPublic),className:`p-2 rounded-xl ${t.isPublic?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"}`,title:"وضعیت نمایش بخش",children:e.jsx(c,{name:t.isPublic?"eye":"eyeOff",className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>et(s),className:"text-red-500 hover:bg-red-500/10 p-2 rounded-xl",children:e.jsx(c,{name:"trash",className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[t.items.map((a,l)=>e.jsxs("div",{className:"flex gap-2 items-start",draggable:!0,onDragStart:r=>Le(r,s,l),onDragEnter:r=>Re(r,s,l),onDragEnd:Ue,style:{cursor:"grab"},children:[e.jsx("div",{className:"mt-3 text-slate-500 cursor-grab active:cursor-grabbing",children:e.jsx(c,{name:"grip",className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[a.type!=="long"&&e.jsx("input",{placeholder:"عنوان",className:"bg-black/30 rounded-xl px-3 py-2 text-xs text-white w-1/3 outline-none focus:bg-black/50 h-10",value:a.key,onChange:r=>B(s,l,"key",r.target.value)}),a.type==="long"&&e.jsx("input",{placeholder:"عنوان (اختیاری)",className:"bg-black/30 rounded-xl px-3 py-2 text-xs text-white w-full outline-none focus:bg-black/50 h-10",value:a.key,onChange:r=>B(s,l,"key",r.target.value)}),a.type!=="long"&&e.jsx("input",{placeholder:"مقدار",className:"bg-black/30 rounded-xl px-3 py-2 text-xs text-white flex-1 outline-none focus:bg-black/50 h-10",value:a.value,onChange:r=>B(s,l,"value",r.target.value)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{type:"button",onClick:()=>B(s,l,"type",a.type==="long"?"kv":"long"),className:`p-2 rounded-xl text-xs h-10 w-10 flex items-center justify-center ${a.type==="long"?"bg-blue-500/20 text-blue-400":"bg-white/5 text-slate-500"}`,title:a.type==="long"?"حالت متن طولانی":"حالت کلید-مقدار",children:e.jsx(c,{name:"text",className:"w-3 h-3"})}),e.jsx("button",{type:"button",onClick:()=>B(s,l,"isPublic",!a.isPublic),className:`p-2 rounded-xl text-xs h-10 w-10 flex items-center justify-center ${a.isPublic?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"}`,title:a.isPublic?"عمومی":"محرمانه",children:e.jsx(c,{name:a.isPublic?"eye":"eyeOff",className:"w-3 h-3"})}),e.jsx("button",{type:"button",onClick:()=>st(s,l),className:"text-slate-500 hover:text-red-500 h-10 w-8 flex items-center justify-center",children:e.jsx(c,{name:"x",className:"w-3 h-3"})})]})]}),a.type==="long"&&e.jsx("textarea",{placeholder:"متن نامه یا توضیحات...",className:"w-full bg-black/30 rounded-xl px-3 py-2 text-xs text-white outline-none focus:bg-black/50 min-h-[80px]",value:a.value,onChange:r=>B(s,l,"value",r.target.value)})]})]},l)),e.jsx("button",{type:"button",onClick:()=>tt(s),className:"text-xs text-blue-400 hover:text-blue-300 flex items-center gap-1 mt-2",children:"+ افزودن ردیف"})]})]},t.id))}),e.jsx("button",{type:"button",onClick:Ye,className:"mt-4 w-full py-3 rounded-2xl border-2 border-dashed border-white/10 text-slate-400 hover:text-white hover:border-purple-500 hover:bg-purple-500/5 transition-all text-xs font-bold",children:"+ ایجاد بخش جدید"})]}),e.jsxs("div",{className:"border-t border-white/5 pt-6 mt-2",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[e.jsx(c,{name:"imagePlus"})," گالری تصاویر"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[Q.map((t,s)=>e.jsxs("div",{className:`relative aspect-square rounded-xl overflow-hidden group border-2 ${t.isPublic?"border-green-500/30":"border-red-500/30"}`,children:[e.jsx("img",{src:t.data,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2 p-2",children:[e.jsx("input",{className:"bg-white/10 text-white text-[10px] p-1 rounded w-full text-center outline-none",placeholder:"عنوان...",value:t.caption||"",onClick:a=>a.stopPropagation(),onChange:a=>Pe(s,!0,a.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>Se(s,!0),className:"bg-white/20 p-2 rounded-full hover:bg-white/40",children:e.jsx(c,{name:t.isPublic?"eye":"eyeOff",className:"w-4 h-4 text-white"})}),e.jsx("button",{type:"button",onClick:()=>Ne(s,!0),className:"bg-red-600 p-2 rounded-full hover:bg-red-500",children:e.jsx(c,{name:"trash",className:"w-4 h-4 text-white"})})]})]})]},s)),oe.map((t,s)=>e.jsxs("div",{className:`relative aspect-square rounded-xl overflow-hidden group border-2 ${t.isPublic?"border-green-500":"border-red-500"}`,children:[e.jsx("img",{src:t.data,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2 p-2",children:[e.jsx("input",{className:"bg-white/10 text-white text-[10px] p-1 rounded w-full text-center outline-none",placeholder:"عنوان...",value:t.caption||"",onClick:a=>a.stopPropagation(),onChange:a=>Pe(s,!1,a.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>Se(s,!1),className:`p-2 rounded-full ${t.isPublic?"bg-green-600":"bg-red-600"}`,children:e.jsx(c,{name:t.isPublic?"eye":"eyeOff",className:"w-4 h-4 text-white"})}),e.jsx("button",{type:"button",onClick:()=>Ne(s,!1),className:"bg-red-600 p-2 rounded-full hover:bg-red-500",children:e.jsx(c,{name:"x",className:"w-4 h-4 text-white"})})]})]})]},`new-${s}`)),e.jsxs("label",{className:"aspect-square rounded-xl border-2 border-dashed border-white/20 hover:border-purple-500 flex flex-col items-center justify-center cursor-pointer text-slate-500 hover:text-white transition-colors bg-white/5",children:[e.jsx(c,{name:"plus",className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"افزودن عکس"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:We})]})]}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"حداکثر ۳۰ عکس. برای تغییر وضعیت یا عنوان، روی عکس کلیک کنید."})]}),e.jsxs("div",{className:"pt-8 flex gap-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 py-5 rounded-2xl font-black text-sm shadow-xl transition-all hover:scale-[1.02] active:scale-95",children:z?"بروزرسانی پرونده":"ثبت در پایگاه داده"}),e.jsx("button",{type:"button",onClick:()=>{U(!1),H(null)},className:"px-8 py-5 rounded-2xl text-slate-500 font-bold text-sm hover:bg-white/5 transition-all",children:"انصراف"})]})]})]})})}),$e&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/98 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"glass w-full max-w-2xl p-8 md:p-12 rounded-[3rem] border border-indigo-500/20 relative shadow-2xl my-8",children:[e.jsx("button",{onClick:()=>{ee(!1),te([])},className:"absolute top-8 left-8 text-slate-500 hover:text-white transition-colors bg-white/5 p-2 rounded-full",children:e.jsx(c,{name:"trash",className:"w-5 h-5 rotate-45"})}),e.jsx("h2",{className:"text-3xl font-black text-white mb-6 text-center tracking-tight",children:"ورود گروهی اطلاعات"}),e.jsx("p",{className:"text-center text-slate-400 mb-8 text-sm",children:"لطفاً مشخص کنید هر فیلد سیستم، از کدام ستون فایل CSV پر شود."}),e.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar",children:Object.entries(le).map(([t,s])=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 p-4 rounded-2xl bg-white/5 border border-white/5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-white text-sm",children:s.label}),e.jsx("span",{className:`text-[10px] mt-1 ${s.defaultPublic?"text-green-400":"text-red-400"}`,children:s.defaultPublic?"ذخیره در عمومی":"ذخیره در محرمانه"})]}),e.jsxs("select",{className:"bg-black text-white p-3 rounded-xl border border-white/20 outline-none focus:border-indigo-500 w-full md:w-48 text-sm",value:xe[t]||"",onChange:a=>fe(l=>({...l,[t]:a.target.value})),children:[e.jsx("option",{value:"",children:"-- انتخاب ستون --"}),Fe.map(a=>e.jsx("option",{value:a,children:a},a))]})]},t))}),e.jsxs("div",{className:"pt-8 flex gap-4",children:[e.jsxs("button",{onClick:ot,className:"flex-1 bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-500 hover:to-blue-500 py-5 rounded-2xl font-black text-sm shadow-xl transition-all hover:scale-[1.02] active:scale-95",children:["شروع عملیات ورود (",de.length," رکورد)"]}),e.jsx("button",{onClick:()=>{ee(!1),te([])},className:"px-8 py-5 rounded-2xl text-slate-500 font-bold text-sm hover:bg-white/5 transition-all",children:"لغو عملیات"})]})]})})}),Ae&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/98 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"glass w-full max-w-4xl p-8 rounded-[3rem] border border-blue-500/20 relative shadow-2xl my-8",children:[e.jsx("button",{onClick:()=>ge(!1),className:"absolute top-8 left-8 text-slate-500 hover:text-white transition-colors bg-white/5 p-2 rounded-full",children:e.jsx(c,{name:"x",className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-3xl font-black text-white mb-8 text-center flex items-center justify-center gap-3",children:[e.jsx(c,{name:"activity",className:"w-8 h-8 text-blue-500"})," داشبورد نظارت و آمار"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/5 p-6 rounded-3xl border border-white/5 text-center",children:[e.jsx("span",{className:"text-4xl font-black text-white block mb-2",children:se.length}),e.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-widest",children:"بازدید کل"})]}),e.jsxs("div",{className:"bg-white/5 p-6 rounded-3xl border border-white/5 text-center",children:[e.jsx("span",{className:"text-4xl font-black text-white block mb-2",children:se.filter(t=>t.device==="Mobile").length}),e.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-widest",children:"موبایل"})]}),e.jsxs("div",{className:"bg-white/5 p-6 rounded-3xl border border-white/5 text-center",children:[e.jsx("span",{className:"text-4xl font-black text-white block mb-2",children:[...new Set(se.map(t=>t.country))].length}),e.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-widest",children:"کشورها"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-xs",children:[e.jsx("thead",{className:"bg-white/5 text-slate-500 font-bold uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 rounded-tr-2xl",children:"زمان"}),e.jsx("th",{className:"p-4",children:"آی‌پی"}),e.jsx("th",{className:"p-4",children:"موقعیت"}),e.jsx("th",{className:"p-4",children:"مختصات"}),e.jsx("th",{className:"p-4",children:"OS/Browser"}),e.jsx("th",{className:"p-4",children:"دستگاه"}),e.jsx("th",{className:"p-4 rounded-tl-2xl",children:"تایم‌زون"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:se.map(t=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-4 font-mono text-slate-400",children:new Date(t.timestamp).toLocaleString("fa-IR")}),e.jsx("td",{className:"p-4 font-mono text-blue-400",children:t.ip}),e.jsxs("td",{className:"p-4 text-white flex items-center gap-2",children:[e.jsx(c,{name:"globe",className:"w-3 h-3 text-slate-500"})," ",t.city,", ",t.country]}),e.jsx("td",{className:"p-4",children:t.geo&&t.geo!=="Denied/Unavailable"?e.jsxs("a",{href:`https://maps.google.com/?q=${t.geo}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline font-mono flex items-center gap-1",children:[e.jsx(c,{name:"globe",className:"w-3 h-3"}),t.geo.split(",").map(s=>Number(s).toFixed(2)).join(", ")]}):e.jsx("span",{className:"text-slate-500",children:"-"})}),e.jsxs("td",{className:"p-4 text-slate-300",children:[t.os," / ",t.browser]}),e.jsx("td",{className:"p-4 text-white",children:e.jsxs("span",{className:`px-2 py-1 rounded-md ${t.device==="Mobile"?"bg-purple-500/20 text-purple-300":"bg-blue-500/20 text-blue-300"}`,children:[t.device," ",t.screen?`(${t.screen})`:""]})}),e.jsx("td",{className:"p-4 font-mono text-xs text-slate-500",children:t.timezone})]},t.id))})]})})]})})}),Ee&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/98 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ue(!1),children:e.jsxs("div",{className:"glass w-full max-w-sm p-8 rounded-[2.5rem] border border-white/10 shadow-2xl relative text-center space-y-6 animate-in zoom-in-95 duration-300",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto border border-white/10",children:e.jsx("span",{className:"text-2xl font-mono font-bold text-slate-400",children:"ls"})}),e.jsxs("div",{className:"space-y-4 text-slate-300 text-sm leading-relaxed font-light",children:[e.jsxs("p",{children:["در لینوکس، ",e.jsx("span",{className:"font-mono text-purple-400 font-bold bg-purple-500/10 px-2 py-0.5 rounded",children:"ls"})," دستوری برای مشاهدهٔ محتوای یک پوشه است؛"]}),e.jsx("p",{children:"برای دیدن آن‌چه معمولاً پنهان می‌ماند."}),e.jsx("div",{className:"w-12 h-0.5 bg-white/10 mx-auto"}),e.jsx("p",{children:"اینجا هم دقیقاً همین کار انجام می‌شود:"}),e.jsx("p",{className:"font-bold text-white",children:"نمایش داده‌ها، بدون تفسیر"})]}),e.jsx("button",{onClick:()=>ue(!1),className:"w-full py-4 rounded-2xl bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white text-xs font-bold transition-all",children:"بستن"})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md flex items-center justify-center p-6 z-50",onClick:()=>X(null),children:e.jsx("div",{className:"glass w-full max-w-md rounded-[3rem] p-10 border border-white/10 shadow-2xl overflow-hidden relative max-h-[90vh] overflow-y-auto custom-scrollbar",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-full mx-auto mb-6 flex items-center justify-center border-4 border-white/10 shadow-2xl overflow-hidden",children:y.personalPhoto?e.jsx("img",{src:y.personalPhoto,className:"w-full h-full object-cover"}):e.jsx("h2",{className:"text-5xl font-black text-white",children:(Ce=y.displayName)==null?void 0:Ce[0]})}),e.jsx("h2",{className:"text-3xl font-bold mb-2 text-white",children:y.displayName}),e.jsx("p",{className:"text-purple-400 text-sm font-bold uppercase tracking-widest mb-8",children:y.role}),e.jsxs("div",{className:"space-y-4 text-right",children:[Object.entries(le).map(([t,s])=>{if(["firstName","lastName","role","personalPhoto"].includes(t))return null;const a=y[t];return!a&&s.defaultPublic?null:e.jsxs("div",{className:"flex flex-col gap-1 border-b border-white/5 pb-3",children:[e.jsxs("span",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-wider flex items-center gap-2",children:[s.isSocial&&e.jsx(c,{name:t,className:`w-3 h-3 ${t==="telegram"?"text-blue-400":t==="instagram"?"text-pink-500":t==="eitaa"?"text-orange-500":t==="bale"?"text-green-500":t==="soroush"?"text-blue-500":""}`}),s.label]}),a?s.type==="textarea"?e.jsx("p",{className:"text-white text-sm font-medium whitespace-pre-wrap leading-relaxed bg-white/5 p-3 rounded-xl border border-white/5",children:y[t]}):s.isSocial?e.jsx("span",{dir:"ltr",className:"text-blue-400 text-sm font-mono text-left",children:y[t]}):e.jsx("span",{className:"text-white text-sm font-medium",children:y[t]}):e.jsx("span",{className:"text-white/30 text-sm select-none filter blur-[6px] relative overflow-hidden bg-white/5 px-2 rounded w-fit",title:"محرمانه",children:ye(s.fakeLen||10,s.isNum)})]},t)}),y.customSections&&y.customSections.length>0&&e.jsx("div",{className:"mt-6 pt-4 border-t border-white/10 space-y-6",children:y.customSections.map((t,s)=>e.jsxs("div",{className:"rounded-2xl p-4 border border-white/5 bg-white/5",children:[e.jsxs("h4",{className:"font-bold mb-3 text-sm flex items-center gap-2 text-indigo-400",children:[e.jsx("div",{className:"w-1.5 h-4 rounded-full bg-current"}),t.title]}),e.jsx("div",{className:"space-y-2",children:t.items.map((a,l)=>e.jsxs("div",{className:"flex flex-col gap-1 text-xs",children:[e.jsxs("span",{className:"text-slate-500",children:[a.key,":"]}),e.jsx("span",{className:`font-medium ${!a.isPublic&&E?"text-red-400":"text-white"}`,children:a.value===M?e.jsx("span",{className:"text-white/30 text-sm select-none filter blur-[6px] relative overflow-hidden bg-white/5 px-2 rounded w-fit",title:"محرمانه",children:ye(10)}):a.type==="long"?e.jsx("p",{className:"whitespace-pre-wrap leading-relaxed mt-1 bg-white/5 p-2 rounded-lg border border-white/5",children:a.value}):a.value})]},l))})]},s))})]}),y.gallery&&y.gallery.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"text-white text-sm font-bold mb-3 text-right",children:"تصاویر ضمیمه"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:y.gallery.map((t,s)=>e.jsx("div",{className:`aspect-square rounded-xl overflow-hidden border cursor-pointer hover:scale-105 transition-transform relative group ${t.isPublic?"border-white/10":"border-red-500/50"}`,onClick:()=>{t.data!==M&&window.open(t.data)},children:t.data===M?e.jsxs("div",{className:"w-full h-full bg-slate-800 flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center backdrop-blur-xl",children:e.jsx(c,{name:"lock",className:"w-4 h-4 text-white/50"})}),e.jsx("span",{className:"text-[10px] text-white/50",children:t.caption||"محرمانه"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.data,className:"w-full h-full object-cover"}),t.caption&&e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-black/60 p-1 text-center",children:e.jsx("span",{className:"text-[10px] text-white truncate block",children:t.caption})})]})},s))})]}),e.jsx("div",{className:`mt-8 p-3 rounded-2xl border ${E?"bg-green-500/5 border-green-500/10":"bg-red-500/5 border-red-500/10"}`,children:E?e.jsx("p",{className:"text-[10px] text-green-400/70 text-center font-bold",children:"دسترسی ادمین فعال است."}):e.jsx("p",{className:"text-[10px] text-red-400/70 text-center",children:"اطلاعات محرمانه مخفی شده است."})}),e.jsx("button",{onClick:()=>X(null),className:"mt-6 w-full py-4 rounded-2xl bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white text-xs font-bold transition-all",children:"بستن پنجره"})]})})})]})}jt.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(Pt,{})}));
